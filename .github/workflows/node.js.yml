NAME: NODE.JS CI

ON:
  PUSH:
    BRANCHES: [ MAIN ]
  PULL_REQUEST:
    BRANCHES: [ MAIN ]

JOBS:
  BUILD:

    RUNS-ON: UBUNTU-LATEST

    STRATEGY:
      MATRIX:
        NODE-VERSION: [14.X, 16.X, 18.X, 20.X]

    STEPS:
      - USES: ACTIONS/CHECKOUT@V3
      - NAME: USE NODE.JS ${{ MATRIX.NODE-VERSION }}
        USES: ACTIONS/SETUP-NODE@V3
        WITH:
          NODE-VERSION: ${{ MATRIX.NODE-VERSION }}
      - RUN: NPM CI
      - RUN: NPM RUN BUILD --IF-PRESENT
      - RUN: NPM TEST
